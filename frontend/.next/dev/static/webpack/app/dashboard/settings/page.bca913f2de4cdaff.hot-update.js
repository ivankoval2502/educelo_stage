"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/settings/page",{

/***/ "(app-pages-browser)/./src/lib/api.ts":
/*!************************!*\
  !*** ./src/lib/api.ts ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changePassword: () => (/* binding */ changePassword),\n/* harmony export */   createConversation: () => (/* binding */ createConversation),\n/* harmony export */   deleteConversation: () => (/* binding */ deleteConversation),\n/* harmony export */   deleteMessage: () => (/* binding */ deleteMessage),\n/* harmony export */   generateConversationTitle: () => (/* binding */ generateConversationTitle),\n/* harmony export */   getConversation: () => (/* binding */ getConversation),\n/* harmony export */   getConversations: () => (/* binding */ getConversations),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getProgressActivity: () => (/* binding */ getProgressActivity),\n/* harmony export */   getProgressStats: () => (/* binding */ getProgressStats),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   registerUser: () => (/* binding */ registerUser),\n/* harmony export */   sendMessage: () => (/* binding */ sendMessage),\n/* harmony export */   sendMessageStream: () => (/* binding */ sendMessageStream),\n/* harmony export */   updateConversationTitle: () => (/* binding */ updateConversationTitle),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile),\n/* harmony export */   updateWeeklyGoal: () => (/* binding */ updateWeeklyGoal)\n/* harmony export */ });\nconst API_URL = \"http://localhost:8000\";\nasync function registerUser(data) {\n    const response = await fetch(`${API_URL}/api/v1/auth/register`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Registration failed');\n    }\n    return response.json();\n}\nasync function loginUser(data) {\n    const formData = new URLSearchParams();\n    formData.append('username', data.email);\n    formData.append('password', data.password);\n    const response = await fetch(`${API_URL}/api/v1/auth/login`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: formData\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Login failed');\n    }\n    return response.json();\n}\nasync function getCurrentUser() {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/auth/me`, {\n        method: 'GET',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to get user');\n    }\n    return response.json();\n}\n// CHAT API\nasync function createConversation(data) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(data)\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to create conversation');\n    }\n    return response.json();\n}\n// Получить список разговоров\nasync function getConversations() {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations`, {\n        method: 'GET',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to get conversations');\n    }\n    return response.json();\n}\n// Получить конкретный разговор с сообщениями\nasync function getConversation(conversationId) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations/${conversationId}`, {\n        method: 'GET',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to get conversation');\n    }\n    return response.json();\n}\n// Отправить сообщение\nasync function sendMessage(conversationId, data) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations/${conversationId}/messages`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(data)\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to send message');\n    }\n    return response.json();\n}\nasync function sendMessageStream(conversationId, data, onChunk, onComplete, onError, signal) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    try {\n        const response = await fetch(`${API_URL}/api/v1/chat/conversations/${conversationId}/messages/stream`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify(data),\n            signal\n        });\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.detail || 'Failed to send message');\n        }\n        const reader = response.body?.getReader();\n        const decoder = new TextDecoder();\n        if (!reader) {\n            throw new Error('No reader available');\n        }\n        let messageId = '';\n        while(true){\n            const { done, value } = await reader.read();\n            if (done) break;\n            const chunk = decoder.decode(value, {\n                stream: true\n            });\n            const lines = chunk.split('\\n');\n            for (const line of lines){\n                if (line.startsWith('data: ')) {\n                    const data = line.slice(6);\n                    if (data === '[DONE]') {\n                        onComplete(messageId);\n                        return;\n                    }\n                    try {\n                        const parsed = JSON.parse(data);\n                        if (parsed.message_id) {\n                            messageId = parsed.message_id;\n                        }\n                        if (parsed.content) {\n                            onChunk(parsed.content);\n                        }\n                    } catch (e) {\n                        console.error('Failed to parse SSE data:', e);\n                    }\n                }\n            }\n        }\n    } catch (error) {\n        if (error instanceof Error && error.name === 'AbortError') {\n            console.log('Generation stopped by user');\n            throw error;\n        }\n        const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n        onError(errorMessage);\n        throw error;\n    }\n}\nasync function generateConversationTitle(conversationId) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations/${conversationId}/generate-title`, {\n        method: 'POST',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to generate title');\n    }\n    return response.json();\n}\n// Update conversation title\nasync function updateConversationTitle(conversationId, title) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations/${conversationId}`, {\n        method: 'PATCH',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n            title\n        })\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to update conversation title');\n    }\n    return response.json();\n}\n// Delete conversation\nasync function deleteConversation(conversationId) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations/${conversationId}`, {\n        method: 'DELETE',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to delete conversation');\n    }\n}\n// Delete message\nasync function deleteMessage(conversationId, messageId) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/chat/conversations/${conversationId}/messages/${messageId}`, {\n        method: 'DELETE',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to delete message');\n    }\n}\n//Progress API\nasync function getProgressStats() {\n    const response = await fetch(`${API_URL}/api/v1/progress/stats`, {\n        headers: {\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n        }\n    });\n    if (!response.ok) {\n        throw new Error('Failed to fetch progress stats');\n    }\n    return response.json();\n}\nasync function getProgressActivity() {\n    const response = await fetch(`${API_URL}/api/v1/progress/activity`, {\n        headers: {\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n        }\n    });\n    if (!response.ok) {\n        throw new Error('Failed to fetch activity data');\n    }\n    return response.json();\n}\n// Update user's data\nasync function updateUserProfile(data) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/auth/me`, {\n        method: 'PATCH',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(data)\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to update profile');\n    }\n    return response.json();\n}\nasync function changePassword(currentPassword, newPassword) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/auth/change-password`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n            current_password: currentPassword,\n            new_password: newPassword\n        })\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to change password');\n    }\n    return response.json();\n}\nasync function updateWeeklyGoal(weeklyGoalHours) {\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n        throw new Error('No access token found');\n    }\n    const response = await fetch(`${API_URL}/api/v1/auth/goal`, {\n        method: 'PATCH',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n            weekly_goal_hours: weeklyGoalHours\n        })\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to update weekly goal');\n    }\n    return response.json();\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxNQUFNckQsUUFBUUMsYUFBYUMsT0FBTyxDQUFDO0lBRW5DLElBQUksQ0FBQ0YsT0FBTztRQUNSLE1BQU0sSUFBSVQsTUFBTTtJQUNwQjtJQUVBLE1BQU1WLFdBQVcsTUFBTUMsTUFBTSxHQUFHUCxRQUFRLGlCQUFpQixDQUFDLEVBQUU7UUFDeERRLFFBQVE7UUFDUkMsU0FBUztZQUNMLGdCQUFnQjtZQUNoQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUVnQixPQUFPO1FBQ3RDO1FBQ0FmLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztZQUFDbUUsbUJBQW1CRDtRQUFlO0lBQzVEO0lBRUEsSUFBSSxDQUFDeEUsU0FBU08sRUFBRSxFQUFFO1FBQ2QsTUFBTUMsUUFBUSxNQUFNUixTQUFTUyxJQUFJO1FBQ2pDLE1BQU0sSUFBSUMsTUFBTUYsTUFBTUcsTUFBTSxJQUFJO0lBQ3BDO0lBRUEsT0FBT1gsU0FBU1MsSUFBSTtBQUN4QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxnZ2RldmlhbnRcXERvY3VtZW50c1xcRWR1Y2Vsb1xcbXZwXFxmcm9udGVuZFxcc3JjXFxsaWJcXGFwaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0xvZ2luRGF0YSwgUmVnaXN0ZXJEYXRhLCBVc2VyLCBBdXRoUmVzcG9uc2UsIENvbnZlcnNhdGlvbiwgQ29udmVyc2F0aW9uQ3JlYXRlLCBDb252ZXJzYXRpb25XaXRoTWVzc2FnZXMsIE1lc3NhZ2VDcmVhdGV9IGZyb20gXCJAL2xpYi90eXBlc1wiO1xyXG5pbXBvcnQge2Vycm9yfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL291dHB1dC9sb2dcIjtcclxuaW1wb3J0IHtNZXNzYWdlfSBmcm9tIFwicG9zdGNzc1wiO1xyXG5cclxuY29uc3QgQVBJX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkxcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlclVzZXIoZGF0YTogUmVnaXN0ZXJEYXRhKTogUHJvbWlzZTxVc2VyPiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L2FwaS92MS9hdXRoL3JlZ2lzdGVyYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZGV0YWlsIHx8ICdSZWdpc3RyYXRpb24gZmFpbGVkJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpblVzZXIoZGF0YTogTG9naW5EYXRhKTogUHJvbWlzZTxBdXRoUmVzcG9uc2U+IHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpXHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXJuYW1lJywgZGF0YS5lbWFpbClcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgncGFzc3dvcmQnLCBkYXRhLnBhc3N3b3JkKVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX1VSTH0vYXBpL3YxL2F1dGgvbG9naW5gLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBmb3JtRGF0YSxcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmRldGFpbCB8fCAnTG9naW4gZmFpbGVkJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpOiBQcm9taXNlPFVzZXI+IHtcclxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpXHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvciAoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfVVJMfS9hcGkvdjEvYXV0aC9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCxcclxuICAgICAgICB9LFxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZGV0YWlsIHx8ICdGYWlsZWQgdG8gZ2V0IHVzZXInKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcclxufVxyXG5cclxuLy8gQ0hBVCBBUElcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb252ZXJzYXRpb24oZGF0YTogQ29udmVyc2F0aW9uQ3JlYXRlKTogUHJvbWlzZTxDb252ZXJzYXRpb24+IHtcclxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpXHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWNjZXNzIHRva2VuIGZvdW5kJylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L2FwaS92MS9jaGF0L2NvbnZlcnNhdGlvbnNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5kZXRhaWwgfHwgJ0ZhaWxlZCB0byBjcmVhdGUgY29udmVyc2F0aW9uJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbn1cclxuXHJcbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0YHQv9C40YHQvtC6INGA0LDQt9Cz0L7QstC+0YDQvtCyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25zKCk6IFByb21pc2U8Q29udmVyc2F0aW9uW10+IHtcclxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpXHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWNjZXNzIHRva2VuIGZvdW5kJylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L2FwaS92MS9jaGF0L2NvbnZlcnNhdGlvbnNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmRldGFpbCB8fCAnRmFpbGVkIHRvIGdldCBjb252ZXJzYXRpb25zJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbn1cclxuXHJcbi8vINCf0L7Qu9GD0YfQuNGC0Ywg0LrQvtC90LrRgNC10YLQvdGL0Lkg0YDQsNC30LPQvtCy0L7RgCDRgSDRgdC+0L7QsdGJ0LXQvdC40Y/QvNC4XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8Q29udmVyc2F0aW9uV2l0aE1lc3NhZ2VzPiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKVxyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfVVJMfS9hcGkvdjEvY2hhdC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5kZXRhaWwgfHwgJ0ZhaWxlZCB0byBnZXQgY29udmVyc2F0aW9uJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbn1cclxuXHJcbi8vINCe0YLQv9GA0LDQstC40YLRjCDRgdC+0L7QsdGJ0LXQvdC40LVcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlKFxyXG4gICAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcclxuICAgIGRhdGE6IE1lc3NhZ2VDcmVhdGVcclxuKTogUHJvbWlzZTxNZXNzYWdlPiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKVxyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICBgJHtBUElfVVJMfS9hcGkvdjEvY2hhdC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L21lc3NhZ2VzYCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5kZXRhaWwgfHwgJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UnKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCkgYXMgUHJvbWlzZTxNZXNzYWdlPlxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2VTdHJlYW0oXHJcbiAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxyXG4gICAgZGF0YTogTWVzc2FnZUNyZWF0ZSxcclxuICAgIG9uQ2h1bms6IChjaHVuazogc3RyaW5nKSA9PiB2b2lkLFxyXG4gICAgb25Db21wbGV0ZTogKG1lc3NhZ2VJZDogc3RyaW5nKSA9PiB2b2lkLFxyXG4gICAgb25FcnJvcjogKGVycm9yOiBzdHJpbmcpID0+IHZvaWQsXHJcbiAgICBzaWduYWw/OiBBYm9ydFNpZ25hbFxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpXHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWNjZXNzIHRva2VuIGZvdW5kJylcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgICAgIGAke0FQSV9VUkx9L2FwaS92MS9jaGF0L2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH0vbWVzc2FnZXMvc3RyZWFtYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5kZXRhaWwgfHwgJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UnKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keT8uZ2V0UmVhZGVyKClcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKClcclxuXHJcbiAgICAgICAgaWYgKCFyZWFkZXIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByZWFkZXIgYXZhaWxhYmxlJylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtZXNzYWdlSWQgPSAnJ1xyXG5cclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpXHJcblxyXG4gICAgICAgICAgICBpZiAoZG9uZSkgYnJlYWtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY2h1bmsuc3BsaXQoJ1xcbicpXHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6ICcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGxpbmUuc2xpY2UoNilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdbRE9ORV0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGUobWVzc2FnZUlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZGF0YSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQubWVzc2FnZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkID0gcGFyc2VkLm1lc3NhZ2VfaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZC5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNodW5rKHBhcnNlZC5jb250ZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgU1NFIGRhdGE6JywgZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGlvbiBzdG9wcGVkIGJ5IHVzZXInKVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvclxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgICBvbkVycm9yKGVycm9yTWVzc2FnZSlcclxuICAgICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29udmVyc2F0aW9uVGl0bGUoXHJcbiAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nXHJcbik6IFByb21pc2U8Q29udmVyc2F0aW9uPiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKVxyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICBgJHtBUElfVVJMfS9hcGkvdjEvY2hhdC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L2dlbmVyYXRlLXRpdGxlYCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZGV0YWlsIHx8ICdGYWlsZWQgdG8gZ2VuZXJhdGUgdGl0bGUnKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcclxufVxyXG5cclxuLy8gVXBkYXRlIGNvbnZlcnNhdGlvbiB0aXRsZVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNvbnZlcnNhdGlvblRpdGxlKFxyXG4gICAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcclxuICAgIHRpdGxlOiBzdHJpbmdcclxuKTogUHJvbWlzZTxDb252ZXJzYXRpb24+IHtcclxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpXHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWNjZXNzIHRva2VuIGZvdW5kJylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGAke0FQSV9VUkx9L2FwaS92MS9jaGF0L2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH1gLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe3RpdGxlfSksXHJcbiAgICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5kZXRhaWwgfHwgJ0ZhaWxlZCB0byB1cGRhdGUgY29udmVyc2F0aW9uIHRpdGxlJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbn1cclxuXHJcbi8vIERlbGV0ZSBjb252ZXJzYXRpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKVxyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICBgJHtBUElfVVJMfS9hcGkvdjEvY2hhdC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9YCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5kZXRhaWwgfHwgJ0ZhaWxlZCB0byBkZWxldGUgY29udmVyc2F0aW9uJylcclxuICAgIH1cclxufVxyXG5cclxuLy8gRGVsZXRlIG1lc3NhZ2VcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU1lc3NhZ2UoXHJcbiAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxyXG4gICAgbWVzc2FnZUlkOiBzdHJpbmdcclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKVxyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICBgJHtBUElfVVJMfS9hcGkvdjEvY2hhdC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L21lc3NhZ2VzLyR7bWVzc2FnZUlkfWAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZGV0YWlsIHx8ICdGYWlsZWQgdG8gZGVsZXRlIG1lc3NhZ2UnKVxyXG4gICAgfVxyXG59XHJcblxyXG4vL1Byb2dyZXNzIEFQSVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NTdGF0cygpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX1VSTH0vYXBpL3YxL3Byb2dyZXNzL3N0YXRzYCwge1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpfWBcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBwcm9ncmVzcyBzdGF0cycpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NBY3Rpdml0eSgpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX1VSTH0vYXBpL3YxL3Byb2dyZXNzL2FjdGl2aXR5YCwge1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpfWBcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBhY3Rpdml0eSBkYXRhJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcbn1cclxuXHJcbi8vIFVwZGF0ZSB1c2VyJ3MgZGF0YVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcm9maWxlKGRhdGE6IHt1c2VybmFtZT86IHN0cmluZywgZW1haWw/OiBzdHJpbmd9KTogUHJvbWlzZTx7bWVzc2FnZTogc3RyaW5nOyB1c2VyOiB7dXNlcm5hbWU6IHN0cmluZzsgZW1haWw6IHN0cmluZ319PiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKVxyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfVVJMfS9hcGkvdjEvYXV0aC9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZGV0YWlsIHx8ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKGN1cnJlbnRQYXNzd29yZDogc3RyaW5nLCBuZXdQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTx7bWVzc2FnZTogc3RyaW5nfT4ge1xyXG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJylcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfVVJMfS9hcGkvdjEvYXV0aC9jaGFuZ2UtcGFzc3dvcmRgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGN1cnJlbnRfcGFzc3dvcmQ6IGN1cnJlbnRQYXNzd29yZCxcclxuICAgICAgICAgICAgbmV3X3Bhc3N3b3JkOiBuZXdQYXNzd29yZFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICApXHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmRldGFpbCB8fCAnRmFpbGVkIHRvIGNoYW5nZSBwYXNzd29yZCcpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlV2Vla2x5R29hbCh3ZWVrbHlHb2FsSG91cnM6IG51bWJlcik6IFByb21pc2U8e21lc3NhZ2U6IHN0cmluZzsgd2Vla2x5X2dvYWxfaG91cnM6IG51bWJlcjsgbmV4dF91cGRhdGVfYXZhaWxhYmxlOiBzdHJpbmd9PiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKVxyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY2VzcyB0b2tlbiBmb3VuZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfVVJMfS9hcGkvdjEvYXV0aC9nb2FsYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt3ZWVrbHlfZ29hbF9ob3Vyczogd2Vla2x5R29hbEhvdXJzfSlcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmRldGFpbCB8fCAnRmFpbGVkIHRvIHVwZGF0ZSB3ZWVrbHkgZ29hbCcpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG59Il0sIm5hbWVzIjpbIkFQSV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInJlZ2lzdGVyVXNlciIsImRhdGEiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJlcnJvciIsImpzb24iLCJFcnJvciIsImRldGFpbCIsImxvZ2luVXNlciIsImZvcm1EYXRhIiwiVVJMU2VhcmNoUGFyYW1zIiwiYXBwZW5kIiwiZW1haWwiLCJwYXNzd29yZCIsImdldEN1cnJlbnRVc2VyIiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY3JlYXRlQ29udmVyc2F0aW9uIiwiZ2V0Q29udmVyc2F0aW9ucyIsImdldENvbnZlcnNhdGlvbiIsImNvbnZlcnNhdGlvbklkIiwic2VuZE1lc3NhZ2UiLCJzZW5kTWVzc2FnZVN0cmVhbSIsIm9uQ2h1bmsiLCJvbkNvbXBsZXRlIiwib25FcnJvciIsInNpZ25hbCIsInJlYWRlciIsImdldFJlYWRlciIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsIm1lc3NhZ2VJZCIsImRvbmUiLCJ2YWx1ZSIsInJlYWQiLCJjaHVuayIsImRlY29kZSIsInN0cmVhbSIsImxpbmVzIiwic3BsaXQiLCJsaW5lIiwic3RhcnRzV2l0aCIsInNsaWNlIiwicGFyc2VkIiwicGFyc2UiLCJtZXNzYWdlX2lkIiwiY29udGVudCIsImUiLCJjb25zb2xlIiwibmFtZSIsImxvZyIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJnZW5lcmF0ZUNvbnZlcnNhdGlvblRpdGxlIiwidXBkYXRlQ29udmVyc2F0aW9uVGl0bGUiLCJ0aXRsZSIsImRlbGV0ZUNvbnZlcnNhdGlvbiIsImRlbGV0ZU1lc3NhZ2UiLCJnZXRQcm9ncmVzc1N0YXRzIiwiZ2V0UHJvZ3Jlc3NBY3Rpdml0eSIsInVwZGF0ZVVzZXJQcm9maWxlIiwiY2hhbmdlUGFzc3dvcmQiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImN1cnJlbnRfcGFzc3dvcmQiLCJuZXdfcGFzc3dvcmQiLCJ1cGRhdGVXZWVrbHlHb2FsIiwid2Vla2x5R29hbEhvdXJzIiwid2Vla2x5X2dvYWxfaG91cnMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/api.ts\n"));

/***/ })

});